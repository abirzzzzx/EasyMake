<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jarvis AI Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
  /* Dark mode styling */
  body {
    margin: 0;
    background-color: #121217;
    color: #e0e0e0;
    font-family: 'Poppins', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    min-height: 100vh;
    user-select: none;
  }

  h1 {
    color: #82aaff;
    margin-bottom: 10px;
  }

  #hello {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 15px;
  }

  #suggestion-box {
    background: #1f1f2e;
    border-radius: 15px;
    box-shadow: 0 0 15px #536dfe88;
    padding: 20px;
    max-width: 350px;
    min-height: 90px;
    font-weight: 600;
    font-size: 1.15rem;
    line-height: 1.3em;
    color: #a8b2ff;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    letter-spacing: 0.04em;
    position: relative;
  }

  #ask-btn {
    margin-top: 25px;
    background: #536dfe;
    border: none;
    border-radius: 12px;
    padding: 14px 26px;
    font-size: 1.1rem;
    color: white;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 5px 15px #536dfe99;
    transition: background 0.3s ease;
    user-select: none;
  }

  #ask-btn:hover {
    background: #414edc;
  }

  /* Typewriter cursor */
  #suggestion-box::after {
    content: '|';
    animation: blink 1s infinite;
    position: absolute;
    right: 15px;
    bottom: 18px;
    font-weight: 900;
    color: #82aaff;
  }

  @keyframes blink {
    0%, 50% {opacity: 1;}
    51%, 100% {opacity: 0;}
  }

  /* Responsive for smaller devices */
  @media (max-width: 400px) {
    #suggestion-box {
      max-width: 90vw;
      font-size: 1rem;
    }
  }
</style>
</head>
<body>

  <h1 id="hello">Hello Abirz! ðŸ¤–</h1>

  <div id="suggestion-box">Click "Ask Jarvis" for ideas! ðŸš€</div>

  <button id="ask-btn">Ask Jarvis</button>

<script>
  const API_URL = 'https://api.naga.ac/v1/chat/completions';
  const API_KEY = 'ng-1q22mTLKYzbfl7rcZ3f0efRAMIrbL5NE';

  const suggestionBox = document.getElementById('suggestion-box');
  const askBtn = document.getElementById('ask-btn');

  // Typewriter effect helper function
  async function typeWriter(text, element) {
    element.textContent = '';
    for(let i = 0; i < text.length; i++) {
      element.textContent += text[i];
      await new Promise(r => setTimeout(r, 40));
    }
  }

  // Function to get Jarvis AI ideas
  async function getJarvisIdea() {
    askBtn.disabled = true;
    suggestionBox.textContent = 'Jarvis is thinking... ðŸ¤”';

    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [
            {
              role: 'system',
              content: "You are Abirzâ€™s hype AI buddy! Give short, exciting, creative ideas related to coding, game dev, sprites, or fun projects! Use exclamation marks and emojis! No boring stuff or generic CSS advice! Keep it under 100 characters, easy to read on mobile."
            },
            {
              role: 'user',
              content: 'Give me cool project ideas!'
            }
          ],
          max_tokens: 100,
          temperature: 0.9
        })
      });

      if (!response.ok) throw new Error(`API error ${response.status}`);

      const data = await response.json();

      let text = data.choices[0].message.content.trim();

      // Fix spacing if words are mashed up
      text = text.replace(/([a-z])([A-Z])/g, '$1 $2');

      // Limit to max 100 characters, trimming nicely at word boundary
      if (text.length > 100) {
        let cutIndex = text.lastIndexOf(' ', 100);
        if (cutIndex === -1) cutIndex = 100;
        text = text.slice(0, cutIndex) + '...';
      }

      await typeWriter(text, suggestionBox);

    } catch (error) {
      suggestionBox.textContent = 'Oops, Jarvis is napping ðŸ˜´. Try again!';
      console.error('Fetch error:', error);
    } finally {
      askBtn.disabled = false;
    }
  }

  askBtn.addEventListener('click', getJarvisIdea);

  // Optional: auto-refresh suggestion every 15 seconds
  // setInterval(getJarvisIdea, 15000);
</script>

</body>
</html>