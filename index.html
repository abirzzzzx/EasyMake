<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jarvis AI Assistant</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  body {
    background-color: #3f3cbb;
    color: white;
    font-family: 'Poppins', sans-serif;
    text-align: center;
    padding: 30px 20px;
    margin: 0;
  }
  #hello {
    font-weight: 700;
    font-size: 2.8rem;
    margin-bottom: 10px;
  }
  #suggestion {
    background: white;
    color: #3f3cbb;
    border-radius: 12px;
    border: 8px solid white;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    font-weight: 600;
    font-size: 1.3rem;
    max-width: 350px;
    margin: 0 auto 30px;
    padding: 15px 20px;
    line-height: 1.3;
    white-space: pre-wrap;
    word-break: break-word;
    max-height: 4.3em; /* ~2.5 lines */
    overflow: hidden;
  }
  #askBtn {
    background-color: #e6e6ff;
    color: #3f3cbb;
    font-weight: 700;
    font-size: 1.2rem;
    border: none;
    border-radius: 12px;
    padding: 15px 35px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: background-color 0.25s ease;
  }
  #askBtn:hover {
    background-color: #c7c7ff;
  }
</style>
</head>
<body>

<h1 id="hello">Hello Abirz! ðŸ‘‹</h1>
<p id="suggestion">Loading Jarvis ideas...</p>
<button id="askBtn">Ask Jarvis ðŸ¤–</button>

<script>
  const suggestionEl = document.getElementById('suggestion');
  const askBtn = document.getElementById('askBtn');

  const API_KEY = '||ng-1q22mTLKYzbfl7rcZ3f0efRAMIrbL5NE||';  // Your Naga API key here
  const API_URL = 'https://api.naga.ac/v1/chat/completions';

  // Hype function to add emoji + exclamation
  function hypeUp(text) {
    if (!text.endsWith('!')) text += '!';
    const emojis = ['ðŸ”¥', 'ðŸš€', 'ðŸŽ‰', 'ðŸ˜Ž', 'ðŸŽ®', 'ðŸ’¡', 'âš¡', 'âœ¨'];
    return text + ' ' + emojis[Math.floor(Math.random() * emojis.length)];
  }

  async function getJarvisIdea() {
    suggestionEl.textContent = 'Thinking... ðŸ¤”';

    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [
            {
              role: 'system',
              content: "You are Abirzâ€™s hype AI buddy! Give short, exciting, creative ideas related to coding, game dev, sprites, or fun projects! Use exclamation marks and emojis! No boring stuff or generic CSS advice! Keep it under 100 characters and easy to read on mobile."
            },
            {
              role: 'user',
              content: 'Give me cool project ideas!'
            }
          ],
          max_tokens: 100,
          temperature: 0.8
        })
      });

      if (!response.ok) throw new Error('API error');

      const data = await response.json();
      let text = data.choices[0].message.content.trim();

      // Fix spacing issues (some AI responses glue words together)
      text = text.replace(/([a-z])([A-Z])/g, '$1 $2'); // add space before caps in mid-word (basic fix)

      // Limit to max 2.5 lines by truncating to approx 100 chars nicely
      if (text.length > 100) {
        // Try to cut at last space before 100 chars for nicer truncation
        const cutIndex = text.lastIndexOf(' ', 100);
        text = text.slice(0, cutIndex > 0 ? cutIndex : 100) + '...';
      }

      suggestionEl.textContent = hypeUp(text);

    } catch (err) {
      suggestionEl.textContent = 'Oops, Jarvis is napping ðŸ˜´. Try again!';
      console.error(err);
    }
  }

  askBtn.addEventListener('click', getJarvisIdea);

  // Auto-refresh suggestion every 10 seconds
  setInterval(getJarvisIdea, 10000);

  // Initial call on load
  getJarvisIdea();
</script>

</body>
</html>